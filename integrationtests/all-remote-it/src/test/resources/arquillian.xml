<?xml version="1.0" encoding="UTF-8"?>
<arquillian xmlns="http://www.jboss.org/arquillian-1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://www.jboss.org/arquillian-1.0 http://jboss.org/schema/arquillian/arquillian-1.0.xsd">

    <group qualifier="infinispan-remote-arquillian-group">

        <!--<container qualifier="container1" mode="suite">-->
            <!--<configuration>-->
                <!--<property name="javaHome">${server.jvm}</property>-->
                <!--<property name="jbossHome">${server1.dist}</property>-->
                <!--<property name="managementAddress">${node0.ip}</property>-->
                <!--<property name="serverConfig">standalone.xml</property>-->
                <!--<property name="javaVmArguments">${server.jvm.args} -Djboss.node.name=node0-->
                    <!---Djboss.bind.address.management=${node0.ip} -Djboss.bind.address=${node0.ip}-->
                <!--</property>-->
                <!--<property name="managementPort">9990</property>-->
                <!--<property name="waitForPorts">11211 11222 8080</property>-->
            <!--</configuration>-->
        <!--</container>-->


        <!-- we need this one for CDI test for deploying test.war file -->

        <engine>
            <property name="deploymentExportPath">target/</property>
        </engine>

        <container qualifier="jboss" default="true" mode="suite">
            <protocol type="jmx-as7">
                <property name="executionType">REMOTE</property>
            </protocol>
            <configuration>
                <property name="jbossHome">${basedir}/target/wildfly-${version.wildfly}</property>
                <property name="serverConfig">standalone-full.xml</property>
                <!-- To debug the Arquillian managed application server: -->
                <!-- property name="javaVmArguments">-Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=y -Xmx512m -XX:MaxPermSize=128m</property -->
                <property name="javaVmArguments">-Djboss.node.name=remote-client -Djboss.socket.binding.port-offset=100</property>
                <property name="managementPort">10090</property>

                 <!-- ADD MANAGEMENT ADDRESS HERE -->
            </configuration>
        </container>


        <!-- TODO: the question here.... -->
        <!-- TODO: let it to be dependant on server testsuite build? On those generated config files? -->
        <!-- TODO: or we want to add the second config modifier here???
             TODO: make it truly independent, but copy redundant code? -->

        <container qualifier="remote-query" mode="suite">
            <configuration>
                <property name="javaHome">${server.jvm}</property>
                <property name="jbossHome">${server1.dist}</property>
                <property name="managementAddress">${node0.ip}</property>

                <!-- TODO: generate clustered indexing file or take it generated from server distro somehow? -->
                <property name="serverConfig">clustered-indexing.xml</property>
                <property name="javaVmArguments">${server.jvm.args} -Djboss.node.name=node0
                    -Djboss.bind.address.management=${node0.ip} -Djboss.bind.address=${node0.ip}</property>
                <property name="managementPort">9990</property>
                <property name="waitForPorts">11222 8080</property>
            </configuration>
        </container>
    </group>
</arquillian>
